@inject UserAuthenticationStateProvider AuthProvider
@inject TextService TextService
@layout AuthenticationLayout
@inherits LayoutComponent

<div class="@CssClass">
    <div class="header">
        <div class="left">
            <NavLink href="/">
                @TextService.Get(TextConstants.Title)
            </NavLink>
        </div>

        <div class="center">
            <NavLink href="/parameter">
                @TextService.Get(TextConstants.LinkNavigationSchema)
            </NavLink>
        </div>

        <div class="right">
            <Button @onclick="SignOut">
                @TextService.Get(TextConstants.ButtonSignOut)
            </Button>
        </div>
    </div>

    <div class="content">
        @Body
    </div>
</div>

@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);
        if (!firstRender) return;

        await TextService.Resolve();
        await InvokeAsync(StateHasChanged);
    }

    private async void SignOut()
    {
        try
        {
            await AuthProvider.ResetIdentity();
        }
        catch (Exception)
        {
            // ignored
        }
    }

}